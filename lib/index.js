!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@wonderlandlabs/hexagony"),require("@wonderlandlabs/propper"),require("@wonderlandlabs/n")):"function"==typeof define&&define.amd?define(["@wonderlandlabs/hexagony","@wonderlandlabs/propper","@wonderlandlabs/n"],r):(t=t||self).LGE=r(t.hexagony,t.propper,t._N)}(this,(function(t,r,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;
/**!
   * is
   * the definitive JavaScript type testing library
   *
   * @copyright 2013-2014 Enrico Marino / Jordan Harband
   * @license MIT
   */
var e,i,o=Object.prototype,a=o.hasOwnProperty,u=o.toString;"function"==typeof Symbol&&(e=Symbol.prototype.valueOf),"function"==typeof BigInt&&(i=BigInt.prototype.valueOf);var s=function(t){return t!=t},c={boolean:1,number:1,string:1,undefined:1},h=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,f=/^[A-Fa-f0-9]+$/,l={};l.a=l.type=function(t,r){return typeof t===r},l.defined=function(t){return void 0!==t},l.empty=function(t){var r,n=u.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(r in t)if(a.call(t,r))return!1;return!0}return!t},l.equal=function(t,r){if(t===r)return!0;var n,e=u.call(t);if(e!==u.call(r))return!1;if("[object Object]"===e){for(n in t)if(!(l.equal(t[n],r[n])&&n in r))return!1;for(n in r)if(!(l.equal(t[n],r[n])&&n in t))return!1;return!0}if("[object Array]"===e){if((n=t.length)!==r.length)return!1;for(;n--;)if(!l.equal(t[n],r[n]))return!1;return!0}return"[object Function]"===e?t.prototype===r.prototype:"[object Date]"===e&&t.getTime()===r.getTime()},l.hosted=function(t,r){var n=typeof r[t];return"object"===n?!!r[t]:!c[n]},l.instance=l.instanceof=function(t,r){return t instanceof r},l.nil=l.null=function(t){return null===t},l.undef=l.undefined=function(t){return void 0===t},l.args=l.arguments=function(t){var r="[object Arguments]"===u.call(t),n=!l.array(t)&&l.arraylike(t)&&l.object(t)&&l.fn(t.callee);return r||n},l.array=Array.isArray||function(t){return"[object Array]"===u.call(t)},l.args.empty=function(t){return l.args(t)&&0===t.length},l.array.empty=function(t){return l.array(t)&&0===t.length},l.arraylike=function(t){return!!t&&!l.bool(t)&&a.call(t,"length")&&isFinite(t.length)&&l.number(t.length)&&t.length>=0},l.bool=l.boolean=function(t){return"[object Boolean]"===u.call(t)},l.false=function(t){return l.bool(t)&&!1===Boolean(Number(t))},l.true=function(t){return l.bool(t)&&!0===Boolean(Number(t))},l.date=function(t){return"[object Date]"===u.call(t)},l.date.valid=function(t){return l.date(t)&&!isNaN(Number(t))},l.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},l.error=function(t){return"[object Error]"===u.call(t)},l.fn=l.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var r=u.call(t);return"[object Function]"===r||"[object GeneratorFunction]"===r||"[object AsyncFunction]"===r},l.number=function(t){return"[object Number]"===u.call(t)},l.infinite=function(t){return t===1/0||t===-1/0},l.decimal=function(t){return l.number(t)&&!s(t)&&!l.infinite(t)&&t%1!=0},l.divisibleBy=function(t,r){var n=l.infinite(t),e=l.infinite(r),i=l.number(t)&&!s(t)&&l.number(r)&&!s(r)&&0!==r;return n||e||i&&t%r==0},l.integer=l.int=function(t){return l.number(t)&&!s(t)&&t%1==0},l.maximum=function(t,r){if(s(t))throw new TypeError("NaN is not a valid value");if(!l.arraylike(r))throw new TypeError("second argument must be array-like");for(var n=r.length;--n>=0;)if(t<r[n])return!1;return!0},l.minimum=function(t,r){if(s(t))throw new TypeError("NaN is not a valid value");if(!l.arraylike(r))throw new TypeError("second argument must be array-like");for(var n=r.length;--n>=0;)if(t>r[n])return!1;return!0},l.nan=function(t){return!l.number(t)||t!=t},l.even=function(t){return l.infinite(t)||l.number(t)&&t==t&&t%2==0},l.odd=function(t){return l.infinite(t)||l.number(t)&&t==t&&t%2!=0},l.ge=function(t,r){if(s(t)||s(r))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(r)&&t>=r},l.gt=function(t,r){if(s(t)||s(r))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(r)&&t>r},l.le=function(t,r){if(s(t)||s(r))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(r)&&t<=r},l.lt=function(t,r){if(s(t)||s(r))throw new TypeError("NaN is not a valid value");return!l.infinite(t)&&!l.infinite(r)&&t<r},l.within=function(t,r,n){if(s(t)||s(r)||s(n))throw new TypeError("NaN is not a valid value");if(!l.number(t)||!l.number(r)||!l.number(n))throw new TypeError("all arguments must be numbers");return l.infinite(t)||l.infinite(r)||l.infinite(n)||t>=r&&t<=n},l.object=function(t){return"[object Object]"===u.call(t)},l.primitive=function(t){return!t||!("object"==typeof t||l.object(t)||l.fn(t)||l.array(t))},l.hash=function(t){return l.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},l.regexp=function(t){return"[object RegExp]"===u.call(t)},l.string=function(t){return"[object String]"===u.call(t)},l.base64=function(t){return l.string(t)&&(!t.length||h.test(t))},l.hex=function(t){return l.string(t)&&(!t.length||f.test(t))},l.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===u.call(t)&&"symbol"==typeof e.call(t)},l.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===u.call(t)&&"bigint"==typeof i.call(t)};var d=l,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(t,r){return t(r={exports:{}},r.exports),r.exports}var y=function(t,r,n){var e=t*r,i=g*t,o=i-(i-t),a=t-o,u=g*r,s=u-(u-r),c=r-s,h=a*c-(e-o*s-a*s-o*c);if(n)return n[0]=h,n[1]=e,n;return[h,e]},g=+(Math.pow(2,27)+1);var m=function(t,r){var n=0|t.length,e=0|r.length;if(1===n&&1===e)return function(t,r){var n=t+r,e=n-t,i=t-(n-e)+(r-e);if(i)return[i,n];return[n]}(t[0],r[0]);var i,o,a=new Array(n+e),u=0,s=0,c=0,h=Math.abs,f=t[s],l=h(f),d=r[c],v=h(d);l<v?(o=f,(s+=1)<n&&(f=t[s],l=h(f))):(o=d,(c+=1)<e&&(d=r[c],v=h(d)));s<n&&l<v||c>=e?(i=f,(s+=1)<n&&(f=t[s],l=h(f))):(i=d,(c+=1)<e&&(d=r[c],v=h(d)));var p,y,g=i+o,m=g-i,x=o-m,b=x,w=g;for(;s<n&&c<e;)l<v?(i=f,(s+=1)<n&&(f=t[s],l=h(f))):(i=d,(c+=1)<e&&(d=r[c],v=h(d))),(x=(o=b)-(m=(g=i+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p;for(;s<n;)(x=(o=b)-(m=(g=(i=f)+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p,(s+=1)<n&&(f=t[s]);for(;c<e;)(x=(o=b)-(m=(g=(i=d)+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p,(c+=1)<e&&(d=r[c]);b&&(a[u++]=b);w&&(a[u++]=w);u||(a[u++]=0);return a.length=u,a};var x=function(t,r,n){var e=t+r,i=e-t,o=r-i,a=t-(e-i);if(n)return n[0]=a+o,n[1]=e,n;return[a+o,e]};var b=function(t,r){var n=t.length;if(1===n){var e=y(t[0],r);return e[0]?e:[e[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],u=0;y(t[0],r,o),o[0]&&(i[u++]=o[0]);for(var s=1;s<n;++s){y(t[s],r,a);var c=o[1];x(c,a[0],o),o[0]&&(i[u++]=o[0]);var h=a[1],f=o[1],l=h+f,d=f-(l-h);o[1]=l,d&&(i[u++]=d)}o[1]&&(i[u++]=o[1]);0===u&&(i[u++]=0);return i.length=u,i};var w=function(t,r){var n=0|t.length,e=0|r.length;if(1===n&&1===e)return function(t,r){var n=t+r,e=n-t,i=t-(n-e)+(r-e);if(i)return[i,n];return[n]}(t[0],-r[0]);var i,o,a=new Array(n+e),u=0,s=0,c=0,h=Math.abs,f=t[s],l=h(f),d=-r[c],v=h(d);l<v?(o=f,(s+=1)<n&&(f=t[s],l=h(f))):(o=d,(c+=1)<e&&(d=-r[c],v=h(d)));s<n&&l<v||c>=e?(i=f,(s+=1)<n&&(f=t[s],l=h(f))):(i=d,(c+=1)<e&&(d=-r[c],v=h(d)));var p,y,g=i+o,m=g-i,x=o-m,b=x,w=g;for(;s<n&&c<e;)l<v?(i=f,(s+=1)<n&&(f=t[s],l=h(f))):(i=d,(c+=1)<e&&(d=-r[c],v=h(d))),(x=(o=b)-(m=(g=i+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p;for(;s<n;)(x=(o=b)-(m=(g=(i=f)+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p,(s+=1)<n&&(f=t[s]);for(;c<e;)(x=(o=b)-(m=(g=(i=d)+o)-i))&&(a[u++]=x),b=w-((p=w+g)-(y=p-w))+(g-y),w=p,(c+=1)<e&&(d=-r[c]);b&&(a[u++]=b);w&&(a[u++]=w);u||(a[u++]=0);return a.length=u,a};var j=p((function(t){var r=5;function n(t,r){for(var n=new Array(t.length-1),e=1;e<t.length;++e)for(var i=n[e-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==r&&(i[a++]=t[e][o]);return n}function e(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var r=t.length>>1;return["sum(",e(t.slice(0,r)),",",e(t.slice(r)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var r=[],o=0;o<t.length;++o)r.push(["scale(",e(i(n(t,o))),",",(a=o,1&a?"-":""),t[0][o],")"].join(""));return r;var a}function o(t){for(var r=[],o=[],a=function(t){for(var r=new Array(t),n=0;n<t;++n){r[n]=new Array(t);for(var e=0;e<t;++e)r[n][e]=["m",e,"[",t-n-1,"]"].join("")}return r}(t),u=[],s=0;s<t;++s)0==(1&s)?r.push.apply(r,i(n(a,s))):o.push.apply(o,i(n(a,s))),u.push("m"+s);var c=e(r),h=e(o),f="orientation"+t+"Exact",l=["function ",f,"(",u.join(),"){var p=",c,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",f].join("");return new Function("sum","prod","scale","sub",l)(m,y,b,w)}var a=o(3),u=o(4),s=[function(){return 0},function(){return 0},function(t,r){return r[0]-t[0]},function(t,r,n){var e,i=(t[1]-n[1])*(r[0]-n[0]),o=(t[0]-n[0])*(r[1]-n[1]),u=i-o;if(i>0){if(o<=0)return u;e=i+o}else{if(!(i<0))return u;if(o>=0)return u;e=-(i+o)}var s=33306690738754716e-32*e;return u>=s||u<=-s?u:a(t,r,n)},function(t,r,n,e){var i=t[0]-e[0],o=r[0]-e[0],a=n[0]-e[0],s=t[1]-e[1],c=r[1]-e[1],h=n[1]-e[1],f=t[2]-e[2],l=r[2]-e[2],d=n[2]-e[2],v=o*h,p=a*c,y=a*s,g=i*h,m=i*c,x=o*s,b=f*(v-p)+l*(y-g)+d*(m-x),w=7771561172376103e-31*((Math.abs(v)+Math.abs(p))*Math.abs(f)+(Math.abs(y)+Math.abs(g))*Math.abs(l)+(Math.abs(m)+Math.abs(x))*Math.abs(d));return b>w||-b>w?b:u(t,r,n,e)}];function c(t){var r=s[t.length];return r||(r=s[t.length]=o(t.length)),r.apply(void 0,t)}!function(){for(;s.length<=r;)s.push(o(s.length));for(var n=[],e=["slow"],i=0;i<=r;++i)n.push("a"+i),e.push("o"+i);var a=["function getOrientation(",n.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=r;++i)a.push("case ",i,":return o",i,"(",n.slice(0,i).join(),");");a.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(a.join(""));var u=Function.apply(void 0,e);for(t.exports=u.apply(void 0,[c].concat(s)),i=0;i<=r;++i)t.exports[i]=s[i]}()})),_=function(t,r){for(var n=r[0],e=r[1],i=t.length,o=1,a=i,u=0,s=i-1;u<a;s=u++){var c=t[u],h=t[s],f=c[1],l=h[1];if(l<f){if(l<e&&e<f){if(0===(p=j(c,h,r)))return 0;o^=0<p|0}else if(e===f){var d=(v=t[(u+1)%i])[1];if(f<d){if(0===(p=j(c,h,r)))return 0;o^=0<p|0}}}else if(f<l){if(f<e&&e<l){if(0===(p=j(c,h,r)))return 0;o^=p<0|0}else if(e===f){var v=t[(u+1)%i];if((d=v[1])<f){var p;if(0===(p=j(c,h,r)))return 0;o^=p<0|0}}}else if(e===f){var y=Math.min(c[0],h[0]),g=Math.max(c[0],h[0]);if(0===u){for(;s>0;){var m=(s+i-1)%i;if((w=t[m])[1]!==e)break;var x=w[0];y=Math.min(y,x),g=Math.max(g,x),s=m}if(0===s)return y<=n&&n<=g?0:1;a=s+1}for(var b=t[(s+i-1)%i][1];u+1<a;){var w;if((w=t[u+1])[1]!==e)break;x=w[0];y=Math.min(y,x),g=Math.max(g,x),u+=1}if(y<=n&&n<=g)return 0;var _=t[(u+1)%i][1];n<y&&b<e!=_<e&&(o^=1)}}return 2*o-1};var M=Array.isArray,E="object"==typeof v&&v&&v.Object===Object&&v,A="object"==typeof self&&self&&self.Object===Object&&self,S=E||A||Function("return this")(),O=S.Symbol,T=Object.prototype,z=T.hasOwnProperty,P=T.toString,B=O?O.toStringTag:void 0;var C=function(t){var r=z.call(t,B),n=t[B];try{t[B]=void 0;var e=!0}catch(t){}var i=P.call(t);return e&&(r?t[B]=n:delete t[B]),i},$=Object.prototype.toString;var N=function(t){return $.call(t)},F="[object Null]",k="[object Undefined]",q=O?O.toStringTag:void 0;var D=function(t){return null==t?void 0===t?k:F:q&&q in Object(t)?C(t):N(t)};var I=function(t){return null!=t&&"object"==typeof t},R="[object Symbol]";var V=function(t){return"symbol"==typeof t||I(t)&&D(t)==R},L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/;var H=function(t,r){if(M(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!V(t))||(U.test(t)||!L.test(t)||null!=r&&t in Object(r))};var G=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},W="[object AsyncFunction]",Z="[object Function]",X="[object GeneratorFunction]",Y="[object Proxy]";var K,J=function(t){if(!G(t))return!1;var r=D(t);return r==Z||r==X||r==W||r==Y},Q=S["__core-js_shared__"],tt=(K=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"";var rt=function(t){return!!tt&&tt in t},nt=Function.prototype.toString;var et=function(t){if(null!=t){try{return nt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},it=/^\[object .+?Constructor\]$/,ot=Function.prototype,at=Object.prototype,ut=ot.toString,st=at.hasOwnProperty,ct=RegExp("^"+ut.call(st).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ht=function(t){return!(!G(t)||rt(t))&&(J(t)?ct:it).test(et(t))};var ft=function(t,r){return null==t?void 0:t[r]};var lt=function(t,r){var n=ft(t,r);return ht(n)?n:void 0},dt=lt(Object,"create");var vt=function(){this.__data__=dt?dt(null):{},this.size=0};var pt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},yt="__lodash_hash_undefined__",gt=Object.prototype.hasOwnProperty;var mt=function(t){var r=this.__data__;if(dt){var n=r[t];return n===yt?void 0:n}return gt.call(r,t)?r[t]:void 0},xt=Object.prototype.hasOwnProperty;var bt=function(t){var r=this.__data__;return dt?void 0!==r[t]:xt.call(r,t)},wt="__lodash_hash_undefined__";var jt=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=dt&&void 0===r?wt:r,this};function _t(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}_t.prototype.clear=vt,_t.prototype.delete=pt,_t.prototype.get=mt,_t.prototype.has=bt,_t.prototype.set=jt;var Mt=_t;var Et=function(){this.__data__=[],this.size=0};var At=function(t,r){return t===r||t!=t&&r!=r};var St=function(t,r){for(var n=t.length;n--;)if(At(t[n][0],r))return n;return-1},Ot=Array.prototype.splice;var Tt=function(t){var r=this.__data__,n=St(r,t);return!(n<0)&&(n==r.length-1?r.pop():Ot.call(r,n,1),--this.size,!0)};var zt=function(t){var r=this.__data__,n=St(r,t);return n<0?void 0:r[n][1]};var Pt=function(t){return St(this.__data__,t)>-1};var Bt=function(t,r){var n=this.__data__,e=St(n,t);return e<0?(++this.size,n.push([t,r])):n[e][1]=r,this};function Ct(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}Ct.prototype.clear=Et,Ct.prototype.delete=Tt,Ct.prototype.get=zt,Ct.prototype.has=Pt,Ct.prototype.set=Bt;var $t=Ct,Nt=lt(S,"Map");var Ft=function(){this.size=0,this.__data__={hash:new Mt,map:new(Nt||$t),string:new Mt}};var kt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var qt=function(t,r){var n=t.__data__;return kt(r)?n["string"==typeof r?"string":"hash"]:n.map};var Dt=function(t){var r=qt(this,t).delete(t);return this.size-=r?1:0,r};var It=function(t){return qt(this,t).get(t)};var Rt=function(t){return qt(this,t).has(t)};var Vt=function(t,r){var n=qt(this,t),e=n.size;return n.set(t,r),this.size+=n.size==e?0:1,this};function Lt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}Lt.prototype.clear=Ft,Lt.prototype.delete=Dt,Lt.prototype.get=It,Lt.prototype.has=Rt,Lt.prototype.set=Vt;var Ut=Lt,Ht="Expected a function";function Gt(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(Ht);var n=function(){var e=arguments,i=r?r.apply(this,e):e[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,e);return n.cache=o.set(i,a)||o,a};return n.cache=new(Gt.Cache||Ut),n}Gt.Cache=Ut;var Wt=Gt,Zt=500;var Xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yt=/\\(\\)?/g,Kt=function(t){var r=Wt(t,(function(t){return n.size===Zt&&n.clear(),t})),n=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Xt,(function(t,n,e,i){r.push(e?i.replace(Yt,"$1"):n||t)})),r}));var Jt=function(t,r){for(var n=-1,e=null==t?0:t.length,i=Array(e);++n<e;)i[n]=r(t[n],n,t);return i},Qt=1/0,tr=O?O.prototype:void 0,rr=tr?tr.toString:void 0;var nr=function t(r){if("string"==typeof r)return r;if(M(r))return Jt(r,t)+"";if(V(r))return rr?rr.call(r):"";var n=r+"";return"0"==n&&1/r==-Qt?"-0":n};var er=function(t){return null==t?"":nr(t)};var ir=function(t,r){return M(t)?t:H(t,r)?[t]:Kt(er(t))},or=1/0;var ar=function(t){if("string"==typeof t||V(t))return t;var r=t+"";return"0"==r&&1/t==-or?"-0":r};var ur=function(t,r){for(var n=0,e=(r=ir(r,t)).length;null!=t&&n<e;)t=t[ar(r[n++])];return n&&n==e?t:void 0};var sr=function(t,r,n){var e=null==t?void 0:ur(t,r);return void 0===e?n:e},cr=Math.ceil,hr=Math.max;var fr=function(t,r,n,e){for(var i=-1,o=hr(cr((r-t)/(n||1)),0),a=Array(o);o--;)a[e?o:++i]=t,t+=n;return a},lr=9007199254740991;var dr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=lr};var vr=function(t){return null!=t&&dr(t.length)&&!J(t)},pr=9007199254740991,yr=/^(?:0|[1-9]\d*)$/;var gr=function(t,r){var n=typeof t;return!!(r=null==r?pr:r)&&("number"==n||"symbol"!=n&&yr.test(t))&&t>-1&&t%1==0&&t<r};var mr=function(t,r,n){if(!G(n))return!1;var e=typeof r;return!!("number"==e?vr(n)&&gr(r,n.length):"string"==e&&r in n)&&At(n[r],t)},xr=NaN,br=/^\s+|\s+$/g,wr=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,_r=/^0o[0-7]+$/i,Mr=parseInt;var Er=function(t){if("number"==typeof t)return t;if(V(t))return xr;if(G(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=G(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(br,"");var n=jr.test(t);return n||_r.test(t)?Mr(t.slice(2),n?2:8):wr.test(t)?xr:+t},Ar=1/0,Sr=17976931348623157e292;var Or=function(t){return t?(t=Er(t))===Ar||t===-Ar?(t<0?-1:1)*Sr:t==t?t:0:0===t?t:0};var Tr=function(t){return function(r,n,e){return e&&"number"!=typeof e&&mr(r,n,e)&&(n=e=void 0),r=Or(r),void 0===n?(n=r,r=0):n=Or(n),e=void 0===e?r<n?1:-1:Or(e),fr(r,n,e,t)}}();var zr=function(t,r){for(var n=-1,e=r.length,i=t.length;++n<e;)t[i+n]=r[n];return t},Pr="[object Arguments]";var Br=function(t){return I(t)&&D(t)==Pr},Cr=Object.prototype,$r=Cr.hasOwnProperty,Nr=Cr.propertyIsEnumerable,Fr=Br(function(){return arguments}())?Br:function(t){return I(t)&&$r.call(t,"callee")&&!Nr.call(t,"callee")},kr=O?O.isConcatSpreadable:void 0;var qr=function(t){return M(t)||Fr(t)||!!(kr&&t&&t[kr])};var Dr=function t(r,n,e,i,o){var a=-1,u=r.length;for(e||(e=qr),o||(o=[]);++a<u;){var s=r[a];n>0&&e(s)?n>1?t(s,n-1,e,i,o):zr(o,s):i||(o[o.length]=s)}return o};var Ir=function(){this.__data__=new $t,this.size=0};var Rr=function(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n};var Vr=function(t){return this.__data__.get(t)};var Lr=function(t){return this.__data__.has(t)},Ur=200;var Hr=function(t,r){var n=this.__data__;if(n instanceof $t){var e=n.__data__;if(!Nt||e.length<Ur-1)return e.push([t,r]),this.size=++n.size,this;n=this.__data__=new Ut(e)}return n.set(t,r),this.size=n.size,this};function Gr(t){var r=this.__data__=new $t(t);this.size=r.size}Gr.prototype.clear=Ir,Gr.prototype.delete=Rr,Gr.prototype.get=Vr,Gr.prototype.has=Lr,Gr.prototype.set=Hr;var Wr=Gr,Zr="__lodash_hash_undefined__";var Xr=function(t){return this.__data__.set(t,Zr),this};var Yr=function(t){return this.__data__.has(t)};function Kr(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new Ut;++r<n;)this.add(t[r])}Kr.prototype.add=Kr.prototype.push=Xr,Kr.prototype.has=Yr;var Jr=Kr;var Qr=function(t,r){for(var n=-1,e=null==t?0:t.length;++n<e;)if(r(t[n],n,t))return!0;return!1};var tn=function(t,r){return t.has(r)},rn=1,nn=2;var en=function(t,r,n,e,i,o){var a=n&rn,u=t.length,s=r.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(t);if(c&&o.get(r))return c==r;var h=-1,f=!0,l=n&nn?new Jr:void 0;for(o.set(t,r),o.set(r,t);++h<u;){var d=t[h],v=r[h];if(e)var p=a?e(v,d,h,r,t,o):e(d,v,h,t,r,o);if(void 0!==p){if(p)continue;f=!1;break}if(l){if(!Qr(r,(function(t,r){if(!tn(l,r)&&(d===t||i(d,t,n,e,o)))return l.push(r)}))){f=!1;break}}else if(d!==v&&!i(d,v,n,e,o)){f=!1;break}}return o.delete(t),o.delete(r),f},on=S.Uint8Array;var an=function(t){var r=-1,n=Array(t.size);return t.forEach((function(t,e){n[++r]=[e,t]})),n};var un=function(t){var r=-1,n=Array(t.size);return t.forEach((function(t){n[++r]=t})),n},sn=1,cn=2,hn="[object Boolean]",fn="[object Date]",ln="[object Error]",dn="[object Map]",vn="[object Number]",pn="[object RegExp]",yn="[object Set]",gn="[object String]",mn="[object Symbol]",xn="[object ArrayBuffer]",bn="[object DataView]",wn=O?O.prototype:void 0,jn=wn?wn.valueOf:void 0;var _n=function(t,r,n,e,i,o,a){switch(n){case bn:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case xn:return!(t.byteLength!=r.byteLength||!o(new on(t),new on(r)));case hn:case fn:case vn:return At(+t,+r);case ln:return t.name==r.name&&t.message==r.message;case pn:case gn:return t==r+"";case dn:var u=an;case yn:var s=e&sn;if(u||(u=un),t.size!=r.size&&!s)return!1;var c=a.get(t);if(c)return c==r;e|=cn,a.set(t,r);var h=en(u(t),u(r),e,i,o,a);return a.delete(t),h;case mn:if(jn)return jn.call(t)==jn.call(r)}return!1};var Mn=function(t,r,n){var e=r(t);return M(t)?e:zr(e,n(t))};var En=function(t,r){for(var n=-1,e=null==t?0:t.length,i=0,o=[];++n<e;){var a=t[n];r(a,n,t)&&(o[i++]=a)}return o};var An=function(){return[]},Sn=Object.prototype.propertyIsEnumerable,On=Object.getOwnPropertySymbols,Tn=On?function(t){return null==t?[]:(t=Object(t),En(On(t),(function(r){return Sn.call(t,r)})))}:An;var zn=function(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e};var Pn=function(){return!1},Bn=p((function(t,r){var n=r&&!r.nodeType&&r,e=n&&t&&!t.nodeType&&t,i=e&&e.exports===n?S.Buffer:void 0,o=(i?i.isBuffer:void 0)||Pn;t.exports=o})),Cn={};Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Arguments]"]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object Boolean]"]=Cn["[object DataView]"]=Cn["[object Date]"]=Cn["[object Error]"]=Cn["[object Function]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn["[object Object]"]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object WeakMap]"]=!1;var $n=function(t){return I(t)&&dr(t.length)&&!!Cn[D(t)]};var Nn=function(t){return function(r){return t(r)}},Fn=p((function(t,r){var n=r&&!r.nodeType&&r,e=n&&t&&!t.nodeType&&t,i=e&&e.exports===n&&E.process,o=function(){try{return i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),kn=Fn&&Fn.isTypedArray,qn=kn?Nn(kn):$n,Dn=Object.prototype.hasOwnProperty;var In=function(t,r){var n=M(t),e=!n&&Fr(t),i=!n&&!e&&Bn(t),o=!n&&!e&&!i&&qn(t),a=n||e||i||o,u=a?zn(t.length,String):[],s=u.length;for(var c in t)!r&&!Dn.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gr(c,s))||u.push(c);return u},Rn=Object.prototype;var Vn=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||Rn)};var Ln=function(t,r){return function(n){return t(r(n))}}(Object.keys,Object),Un=Object.prototype.hasOwnProperty;var Hn=function(t){if(!Vn(t))return Ln(t);var r=[];for(var n in Object(t))Un.call(t,n)&&"constructor"!=n&&r.push(n);return r};var Gn=function(t){return vr(t)?In(t):Hn(t)};var Wn=function(t){return Mn(t,Gn,Tn)},Zn=1,Xn=Object.prototype.hasOwnProperty;var Yn=function(t,r,n,e,i,o){var a=n&Zn,u=Wn(t),s=u.length;if(s!=Wn(r).length&&!a)return!1;for(var c=s;c--;){var h=u[c];if(!(a?h in r:Xn.call(r,h)))return!1}var f=o.get(t);if(f&&o.get(r))return f==r;var l=!0;o.set(t,r),o.set(r,t);for(var d=a;++c<s;){var v=t[h=u[c]],p=r[h];if(e)var y=a?e(p,v,h,r,t,o):e(v,p,h,t,r,o);if(!(void 0===y?v===p||i(v,p,n,e,o):y)){l=!1;break}d||(d="constructor"==h)}if(l&&!d){var g=t.constructor,m=r.constructor;g!=m&&"constructor"in t&&"constructor"in r&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(l=!1)}return o.delete(t),o.delete(r),l},Kn=lt(S,"DataView"),Jn=lt(S,"Promise"),Qn=lt(S,"Set"),te=lt(S,"WeakMap"),re=et(Kn),ne=et(Nt),ee=et(Jn),ie=et(Qn),oe=et(te),ae=D;(Kn&&"[object DataView]"!=ae(new Kn(new ArrayBuffer(1)))||Nt&&"[object Map]"!=ae(new Nt)||Jn&&"[object Promise]"!=ae(Jn.resolve())||Qn&&"[object Set]"!=ae(new Qn)||te&&"[object WeakMap]"!=ae(new te))&&(ae=function(t){var r=D(t),n="[object Object]"==r?t.constructor:void 0,e=n?et(n):"";if(e)switch(e){case re:return"[object DataView]";case ne:return"[object Map]";case ee:return"[object Promise]";case ie:return"[object Set]";case oe:return"[object WeakMap]"}return r});var ue=ae,se=1,ce="[object Arguments]",he="[object Array]",fe="[object Object]",le=Object.prototype.hasOwnProperty;var de=function(t,r,n,e,i,o){var a=M(t),u=M(r),s=a?he:ue(t),c=u?he:ue(r),h=(s=s==ce?fe:s)==fe,f=(c=c==ce?fe:c)==fe,l=s==c;if(l&&Bn(t)){if(!Bn(r))return!1;a=!0,h=!1}if(l&&!h)return o||(o=new Wr),a||qn(t)?en(t,r,n,e,i,o):_n(t,r,s,n,e,i,o);if(!(n&se)){var d=h&&le.call(t,"__wrapped__"),v=f&&le.call(r,"__wrapped__");if(d||v){var p=d?t.value():t,y=v?r.value():r;return o||(o=new Wr),i(p,y,n,e,o)}}return!!l&&(o||(o=new Wr),Yn(t,r,n,e,i,o))};var ve=function t(r,n,e,i,o){return r===n||(null==r||null==n||!I(r)&&!I(n)?r!=r&&n!=n:de(r,n,e,i,t,o))},pe=1,ye=2;var ge=function(t,r,n,e){var i=n.length,o=i,a=!e;if(null==t)return!o;for(t=Object(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var s=(u=n[i])[0],c=t[s],h=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var f=new Wr;if(e)var l=e(c,h,s,t,r,f);if(!(void 0===l?ve(h,c,pe|ye,e,f):l))return!1}}return!0};var me=function(t){return t==t&&!G(t)};var xe=function(t){for(var r=Gn(t),n=r.length;n--;){var e=r[n],i=t[e];r[n]=[e,i,me(i)]}return r};var be=function(t,r){return function(n){return null!=n&&(n[t]===r&&(void 0!==r||t in Object(n)))}};var we=function(t){var r=xe(t);return 1==r.length&&r[0][2]?be(r[0][0],r[0][1]):function(n){return n===t||ge(n,t,r)}};var je=function(t,r){return null!=t&&r in Object(t)};var _e=function(t,r,n){for(var e=-1,i=(r=ir(r,t)).length,o=!1;++e<i;){var a=ar(r[e]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++e!=i?o:!!(i=null==t?0:t.length)&&dr(i)&&gr(a,i)&&(M(t)||Fr(t))};var Me=function(t,r){return null!=t&&_e(t,r,je)},Ee=1,Ae=2;var Se=function(t,r){return H(t)&&me(r)?be(ar(t),r):function(n){var e=sr(n,t);return void 0===e&&e===r?Me(n,t):ve(r,e,Ee|Ae)}};var Oe=function(t){return t};var Te=function(t){return function(r){return null==r?void 0:r[t]}};var ze=function(t){return function(r){return ur(r,t)}};var Pe=function(t){return H(t)?Te(ar(t)):ze(t)};var Be=function(t){return"function"==typeof t?t:null==t?Oe:"object"==typeof t?M(t)?Se(t[0],t[1]):we(t):Pe(t)};var Ce=function(t){return function(r,n,e){for(var i=-1,o=Object(r),a=e(r),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return r}}();var $e=function(t,r){return function(n,e){if(null==n)return n;if(!vr(n))return t(n,e);for(var i=n.length,o=r?i:-1,a=Object(n);(r?o--:++o<i)&&!1!==e(a[o],o,a););return n}}((function(t,r){return t&&Ce(t,r,Gn)}));var Ne=function(t,r){var n=-1,e=vr(t)?Array(t.length):[];return $e(t,(function(t,i,o){e[++n]=r(t,i,o)})),e};var Fe=function(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t};var ke=function(t,r){if(t!==r){var n=void 0!==t,e=null===t,i=t==t,o=V(t),a=void 0!==r,u=null===r,s=r==r,c=V(r);if(!u&&!c&&!o&&t>r||o&&a&&s&&!u&&!c||e&&a&&s||!n&&s||!i)return 1;if(!e&&!o&&!c&&t<r||c&&n&&i&&!e&&!o||u&&n&&i||!a&&i||!s)return-1}return 0};var qe=function(t,r,n){for(var e=-1,i=t.criteria,o=r.criteria,a=i.length,u=n.length;++e<a;){var s=ke(i[e],o[e]);if(s)return e>=u?s:s*("desc"==n[e]?-1:1)}return t.index-r.index};var De=function(t,r,n){var e=-1;r=Jt(r.length?r:[Oe],Nn(Be));var i=Ne(t,(function(t,n,i){return{criteria:Jt(r,(function(r){return r(t)})),index:++e,value:t}}));return Fe(i,(function(t,r){return qe(t,r,n)}))};var Ie=function(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)},Re=Math.max;var Ve=function(t,r,n){return r=Re(void 0===r?t.length-1:r,0),function(){for(var e=arguments,i=-1,o=Re(e.length-r,0),a=Array(o);++i<o;)a[i]=e[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=e[i];return u[r]=n(a),Ie(t,this,u)}};var Le=function(t){return function(){return t}},Ue=function(){try{var t=lt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),He=Ue?function(t,r){return Ue(t,"toString",{configurable:!0,enumerable:!1,value:Le(r),writable:!0})}:Oe,Ge=800,We=16,Ze=Date.now;var Xe=function(t){var r=0,n=0;return function(){var e=Ze(),i=We-(e-n);if(n=e,i>0){if(++r>=Ge)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(He);var Ye=function(t,r){return Xe(Ve(t,r,Oe),t+"")}((function(t,r){if(null==t)return[];var n=r.length;return n>1&&mr(t,r[0],r[1])?r=[]:n>2&&mr(r[0],r[1],r[2])&&(r=[r[0]]),De(t,Dr(r,1),[])}));function Ke(t,r){this.x=t||0,this.y=r||0}Object.defineProperties(Ke.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ke.prototype,{isVector2:!0,set:function(t,r){return this.x=t,this.y=r,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,r){return void 0!==r?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this},sub:function(t,r){return void 0!==r?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var r=this.x,n=this.y,e=t.elements;return this.x=e[0]*r+e[3]*n+e[6],this.y=e[1]*r+e[4]*n+e[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this},clampScalar:function(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this},clampLength:function(t,r){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this},lerpVectors:function(t,r,n){return this.subVectors(r,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t},fromBufferAttribute:function(t,r,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this},rotateAround:function(t,r){var n=Math.cos(r),e=Math.sin(r),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*e+t.x,this.y=i*e+o*n+t.y,this}});var Je=new Ke;function Qe(t,r){this.min=void 0!==t?t:new Ke(1/0,1/0),this.max=void 0!==r?r:new Ke(-1/0,-1/0)}Object.assign(Qe.prototype,{set:function(t,r){return this.min.copy(t),this.max.copy(r),this},setFromPoints:function(t){this.makeEmpty();for(var r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this},setFromCenterAndSize:function(t,r){var n=Je.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ke),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ke),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,r){return void 0===r&&(console.warn("THREE.Box2: .getParameter() target is now required"),r=new Ke),r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,r){return void 0===r&&(console.warn("THREE.Box2: .clampPoint() target is now required"),r=new Ke),r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Je.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});const ti=new t.CubeCoord(0,0,0);class ri{constructor(t={}){this.coord=sr(t,"coord",ti),this.name=sr(t,"name",""),this.parent=sr(t,"parent",null),this.divisions=sr(t,"divisions",1),this.pointy=this.parent?this.parent.pointy:sr(t,"pointy",!0),this.diameter=this.parent?this.parent.diameter/this.divisions:sr(t,"diameter",1)}get matrix(){return this._matrix?this._matrix.size=this.diameter:this._matrix=new t.Hexes({pointy:this.pointy,scale:this.diameter}),this._matrix}childExtent(){return this.size?(this._box||(this._box=this.reduce((t,r)=>t?t.union(r.toBox()):r.toBox(),null)),this._box):this.toBox()}corners(t){return this.matrix.corners(this.coord).map(r=>!t&&this.parent?r.add(this.parent.center):r)}toBox(t){let r=this.corners(t);t&&(r=this.matrix.corners(ti));let n=new Qe(r[0].clone(),r[0].clone());return r.forEach(t=>{n=n.union({min:t,max:t})}),n}get center(){this.diameter||console.log("undefined diameter for ",this.id);const t=this.coord.toXY(this.matrix);return this.parent?this.parent.center.add(t):t}get size(){return this.children.size}get x(){return this.coord.x}get y(){return this.coord.y}get z(){return this.coord.z}forEach(t){this.children.forEach(t)}map(t){const r=[];return this.forEach(n=>{d.function(t)?r.push(t(n)):r.push(n.get(t))}),r}reduce(t,r){let n=r;return this.forEach(r=>{n=t(n,r)}),n}sumOf(t){return this.reduce((r,n)=>d.function(t)?t(n)+r:n.get(t)+r,0)}get localId(){return`x${this.coord.x}y${this.coord.y}z${this.coord.z}`}get id(){return`${this.parent?`${this.parent.id}.`:""}${this.name}${this.localId}`}get localIdLong(){return`x${this.coord.x}y${this.coord.y}d${this.divisions}`}get idLong(){return`${this.parent?`${this.parent.idLong}.`:""}${this.localIdLong}`}makeChild(t,r){return new ri({coord:t,parent:this,divisions:r})}insetCorners(){const t=this.corners(),r=-1/(2*this.childDivisions);return t.map(t=>t.clone().lerp(this.center,r))}divide(r,n=!1){if(!d.integer(r)&&r>0)throw new Error(`cannot divide ${this.id} by ${r}`);const e=2*r+(n?1:0);this.childDivisions=e,this.children.clear();const i=this.insetCorners().map(t=>t.toArray()),o=Tr(-2*r,2*r);o.forEach(r=>o.forEach(n=>{const o=new t.CubeCoord(r,n),a=this.makeChild(o,e);-1===_(i,a.center.toArray())&&this.children.set(a.localId,a)}))}set(t,r){this.props.set(t,r)}child(t){return this.children.get(t)}has(t){return this.props.has(t)}get heritage(){return this.parent?[...this.parent.heritage,this]:[this]}get root(){return this.parent?this.parent.root:this}get(t){if(this.has(t))return this.props.get(t);if(!this.parent)return null;if(this.parent===this)return void console.log("FRY!!!");let r=this.parent.get(t);return d.number(r)&&(r/=this.divisions),r}getTop(t){return this.parent?this.parent.getTop(t):this.props.get(t)[0]}get depth(){return this.parent?this.parent.depth+1:0}generate(t){if(!this.parent.generators.has(t))throw new Error(`child ${this.id}parent does not have generator ${t}`);this.set(t,this.parent.generators.get(t)(this))}getChildren(){return Array.from(this.children.values())}childrenBy(t,r=!1,n=!0){let e=Ye(this.getChildren(),r=>r.get(t));return n&&(e=e.filter(r=>r.get(t)>0)),r?e.reverse():e}childrenByGalaxies(t=!1,r=!0){let n=Ye(this.getChildren(),"galaxies");return r&&(n=n.filter(t=>t.galaxies>0)),t?n.reverse():n}generateSectors(t){this.divide(t,!0),this.do(t=>{t.generate("distribution")}),this.distributeGalaxies()}}r.proppify(ri).addProp("children",()=>new Map).addProp("generators",()=>new Map).addProp("props",()=>new Map).addProp("diameter",1,"number").addProp("name","","string").addProp("divisions",100,"number").addProp("childDivisions",0,"number").addProp("coord",()=>new t.CubeCoord(0,0),"object").addProp("parent");const ni=9007199254740992,ei=ni-1,ii=-1>>>0,oi=ii+1,ai=oi/2,ui=ai-1,si=1<<21,ci=si-1;function hi(t){return 0|t.next()}function fi(t,r){return 0===r?t:n=>t(n)+r}function li(t){const r=0|t.next(),n=t.next()>>>0;return(r&ci)*oi+n+(r&si?-ni:0)}function di(t){for(;;){const r=0|t.next();if(!(4194304&r)){const n=t.next()>>>0;return(r&ci)*oi+n+(r&si?-ni:0)}if(4194304==(8388607&r)&&0==(0|t.next()))return ni}}function vi(t){return t.next()>>>0}function pi(t){const r=t.next()&ci,n=t.next()>>>0;return r*oi+n}function yi(t){for(;;){const r=0|t.next();if(!(r&si)){const n=t.next()>>>0;return(r&ci)*oi+n}if(0==(r&ci)&&0==(0|t.next()))return ni}}function gi(t){return 0==(t+1&t)}function mi(t){return gi(t)?(r=t,t=>t.next()&r):function(t){const r=t+1,n=r*Math.floor(oi/r);return t=>{let e=0;do{e=t.next()>>>0}while(e>=n);return e%r}}(t);var r}function xi(t){const r=t+1;if(0==(0|r)){const t=(r/oi|0)-1;if(gi(t))return n=t,t=>{const r=t.next()&n,e=t.next()>>>0;return r*oi+e}}var n;return function(t){const r=t*Math.floor(ni/t);return n=>{let e=0;do{const t=n.next()&ci,r=n.next()>>>0;e=t*oi+r}while(e>=r);return e%t}}(r)}function bi(t,r){return n=>{let e=0;do{const t=0|n.next(),r=n.next()>>>0;e=(t&ci)*oi+r+(t&si?-ni:0)}while(e<t||e>r);return e}}function wi(t,r){if(t=Math.floor(t),r=Math.floor(r),t<-ni||!isFinite(t))throw new RangeError(`Expected min to be at least ${-ni}`);if(r>ni||!isFinite(r))throw new RangeError(`Expected max to be at most ${ni}`);const n=r-t;return n<=0||!isFinite(n)?()=>t:n===ii?0===t?vi:fi(hi,t+ai):n<ii?fi(mi(n),t):n===ei?fi(pi,t):n<ei?fi(xi(n),t):r-1-t===ei?fi(yi,t):t===-ni&&r===ni?di:t===-ni&&r===ei?li:t===-ei&&r===ni?fi(li,1):r===ni?fi(bi(t-1,r-1),1):bi(t,r)}function ji(t){return 1==(1&t.next())}function _i(t,r){return n=>t(n)<r}function Mi(t,r){return null==r?null==t?ji:function(t){if(t<=0)return()=>!1;if(t>=1)return()=>!0;{const r=t*oi;return r%1==0?_i(hi,r-ai|0):_i(pi,Math.round(t*ni))}}(t):t<=0?()=>!1:t>=r?()=>!0:_i(wi(0,r-1),t)}function Ei(t){return wi(1,t)}const Ai="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";function Si(t=Ai){const r=t.length;if(!r)throw new Error("Expected pool not to be an empty string");const n=wi(0,r-1);return(r,e)=>{let i="";for(let o=0;o<e;++o){const e=n(r);i+=t.charAt(e)}return i}}const Oi=Si("0123456789abcdef"),Ti=Si("0123456789abcdef".toUpperCase());function zi(t,r){return t<0?Math.max(t+r,0):Math.min(t,r)}function Pi(t){const r=+t;return r<0?Math.ceil(r):Math.floor(r)}function Bi(t){return pi(t)/ni}function Ci(t){return yi(t)/ni}const $i=Array.prototype.slice;function Ni(t,r,n=0){const e=r.length;if(e)for(let i=e-1>>>0;i>n;--i){const n=wi(0,i)(t);if(i!==n){const t=r[i];r[i]=r[n],r[n]=t}}return r}const Fi=(()=>{try{if("xxx"==="x".repeat(3))return(t,r)=>t.repeat(r)}catch(t){}return(t,r)=>{let n="";for(;r>0;)1&r&&(n+=t),r>>=1,t+=t;return n}})();function ki(t,r){return Fi("0",r-t.length)+t}const qi={next:()=>Math.random()*oi|0};class Di{constructor(t=qi){this.engine=t}int32(){return hi(this.engine)}uint32(){return vi(this.engine)}uint53(){return pi(this.engine)}uint53Full(){return yi(this.engine)}int53(){return li(this.engine)}int53Full(){return di(this.engine)}integer(t,r){return wi(t,r)(this.engine)}realZeroToOneInclusive(){return Ci(this.engine)}realZeroToOneExclusive(){return Bi(this.engine)}real(t,r,n=!1){return function(t,r,n=!1){if(!isFinite(t))throw new RangeError("Expected min to be a finite number");if(!isFinite(r))throw new RangeError("Expected max to be a finite number");return fi((e=n?Ci:Bi,1===(i=r-t)?e:0===i?()=>0:t=>e(t)*i),t);var e,i}(t,r,n)(this.engine)}bool(t,r){return Mi(t,r)(this.engine)}pick(t,r,n){return function(t,r,n,e){const i=r.length;if(0===i)throw new RangeError("Cannot pick from an empty array");const o=null==n?0:zi(Pi(n),i),a=void 0===e?i:zi(Pi(e),i);if(o>=a)throw new RangeError(`Cannot pick between bounds ${o} and ${a}`);return r[wi(o,a-1)(t)]}(this.engine,t,r,n)}shuffle(t){return Ni(this.engine,t)}sample(t,r){return function(t,r,n){if(n<0||n>r.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===n)return[];const e=$i.call(r),i=e.length;if(i===n)return Ni(t,e,0);const o=i-n;return Ni(t,e,o-1).slice(o)}(this.engine,t,r)}die(t){return Ei(t)(this.engine)}dice(t,r){return function(t,r){const n=Ei(t);return t=>{const e=[];for(let i=0;i<r;++i)e.push(n(t));return e}}(t,r)(this.engine)}uuid4(){return function(t){const r=t.next()>>>0,n=0|t.next(),e=0|t.next(),i=t.next()>>>0;return ki(r.toString(16),8)+"-"+ki((65535&n).toString(16),4)+"-"+ki((n>>4&4095|16384).toString(16),4)+"-"+ki((16383&e|32768).toString(16),4)+"-"+ki((e>>4&65535).toString(16),4)+ki(i.toString(16),8)}(this.engine)}string(t,r){return Si(r)(this.engine,t)}hex(t,r){return function(t){return t?Ti:Oi}(r)(this.engine,t)}date(t,r){return function(t,r){const n=wi(+t,+r);return t=>new Date(n(t))}(t,r)(this.engine)}}const Ii=(()=>{try{const t=new ArrayBuffer(4),r=new Int32Array(t);if(r[0]=ai,r[0]===-ai)return Int32Array}catch(t){}return Array})();const Ri=(()=>{try{if(-5===Math.imul(ii,5))return Math.imul}catch(t){}return(t,r)=>{const n=65535&t,e=65535&r;return n*e+((t>>>16&65535)*e+n*(r>>>16&65535)<<16>>>0)|0}})(),Vi=624,Li=Vi-1,Ui=397,Hi=Vi-Ui,Gi=2567483615;class Wi{constructor(){this.data=new Ii(Vi),this.index=0,this.uses=0}static seed(t){return(new Wi).seed(t)}static seedWithArray(t){return(new Wi).seedWithArray(t)}static autoSeed(){return Wi.seedWithArray(function(t=qi,r=16){const n=[];n.push(0|(new Date).getTime());for(let e=1;e<r;++e)n[e]=0|t.next();return n}())}next(){(0|this.index)>=Vi&&(Zi(this.data),this.index=0);const t=this.data[this.index];return this.index=this.index+1|0,this.uses+=1,0|function(t){return t^=t>>>11,t^=t<<7&2636928640,(t^=t<<15&4022730752)^t>>>18}(t)}getUseCount(){return this.uses}discard(t){if(t<=0)return this;for(this.uses+=t,(0|this.index)>=Vi&&(Zi(this.data),this.index=0);t+this.index>Vi;)t-=Vi-this.index,Zi(this.data),this.index=0;return this.index=this.index+t|0,this}seed(t){let r=0;this.data[0]=r=0|t;for(let t=1;t<Vi;t=t+1|0)this.data[t]=r=Ri(r^r>>>30,1812433253)+t|0;return this.index=Vi,this.uses=0,this}seedWithArray(t){return this.seed(19650218),function(t,r){let n=1,e=0;const i=r.length;let o=0|Math.max(i,Vi),a=0|t[0];for(;(0|o)>0;--o)t[n]=a=(t[n]^Ri(a^a>>>30,1664525))+(0|r[e])+(0|e)|0,++e,(0|(n=n+1|0))>Li&&(t[0]=t[Li],n=1),e>=i&&(e=0);for(o=Li;(0|o)>0;--o)t[n]=a=(t[n]^Ri(a^a>>>30,1566083941))-n|0,(0|(n=n+1|0))>Li&&(t[0]=t[Li],n=1);t[0]=ai}(this.data,t),this}}function Zi(t){let r=0,n=0;for(;(0|r)<Hi;r=r+1|0)n=t[r]&ai|t[r+1|0]&ui,t[r]=t[r+Ui|0]^n>>>1^(1&n?Gi:0);for(;(0|r)<Li;r=r+1|0)n=t[r]&ai|t[r+1|0]&ui,t[r]=t[r-Hi|0]^n>>>1^(1&n?Gi:0);n=t[Li]&ai|t[0]&ui,t[Li]=t[Ui-1]^n>>>1^(1&n?Gi:0)}var Xi=(t="seed")=>{const r=(t=>Tr(0,t.length+1).reduce((r,n)=>{const e=t.charCodeAt(n)+1;return r*e<Number.MAX_SAFE_INTEGER?r*e:r+e<Number.MAX_SAFE_INTEGER?r+e:Math.abs(r-e)},0))(t),n=Wi.seed(r),e=new Di(n);return()=>e.real(0,1)},Yi=p((function(t,r){!function(){var n=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,i=1/6,o=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20;function u(t){var r;r="function"==typeof t?t:t?function(){var t=0,r=0,n=0,e=1,i=(o=4022871197,function(t){t=t.toString();for(var r=0;r<t.length;r++){var n=.02519603282416938*(o+=t.charCodeAt(r));n-=o=n>>>0,o=(n*=o)>>>0,o+=4294967296*(n-=o)}return 2.3283064365386963e-10*(o>>>0)});var o;t=i(" "),r=i(" "),n=i(" ");for(var a=0;a<arguments.length;a++)(t-=i(arguments[a]))<0&&(t+=1),(r-=i(arguments[a]))<0&&(r+=1),(n-=i(arguments[a]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*e;return t=r,r=n,n=i-(e=0|i)}}(t):Math.random,this.p=s(r),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function s(t){var r,n=new Uint8Array(256);for(r=0;r<256;r++)n[r]=r;for(r=0;r<255;r++){var e=r+~~(t()*(256-r)),i=n[r];n[r]=n[e],n[e]=i}return n}u.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,r){var i,o,a=this.permMod12,u=this.perm,s=this.grad3,c=0,h=0,f=0,l=(t+r)*n,d=Math.floor(t+l),v=Math.floor(r+l),p=(d+v)*e,y=t-(d-p),g=r-(v-p);y>g?(i=1,o=0):(i=0,o=1);var m=y-i+e,x=g-o+e,b=y-1+2*e,w=g-1+2*e,j=255&d,_=255&v,M=.5-y*y-g*g;if(M>=0){var E=3*a[j+u[_]];c=(M*=M)*M*(s[E]*y+s[E+1]*g)}var A=.5-m*m-x*x;if(A>=0){var S=3*a[j+i+u[_+o]];h=(A*=A)*A*(s[S]*m+s[S+1]*x)}var O=.5-b*b-w*w;if(O>=0){var T=3*a[j+1+u[_+1]];f=(O*=O)*O*(s[T]*b+s[T+1]*w)}return 70*(c+h+f)},noise3D:function(t,r,n){var e,o,a,u,s,c,h,f,l,d,v=this.permMod12,p=this.perm,y=this.grad3,g=(t+r+n)*(1/3),m=Math.floor(t+g),x=Math.floor(r+g),b=Math.floor(n+g),w=(m+x+b)*i,j=t-(m-w),_=r-(x-w),M=n-(b-w);j>=_?_>=M?(s=1,c=0,h=0,f=1,l=1,d=0):j>=M?(s=1,c=0,h=0,f=1,l=0,d=1):(s=0,c=0,h=1,f=1,l=0,d=1):_<M?(s=0,c=0,h=1,f=0,l=1,d=1):j<M?(s=0,c=1,h=0,f=0,l=1,d=1):(s=0,c=1,h=0,f=1,l=1,d=0);var E=j-s+i,A=_-c+i,S=M-h+i,O=j-f+2*i,T=_-l+2*i,z=M-d+2*i,P=j-1+.5,B=_-1+.5,C=M-1+.5,$=255&m,N=255&x,F=255&b,k=.6-j*j-_*_-M*M;if(k<0)e=0;else{var q=3*v[$+p[N+p[F]]];e=(k*=k)*k*(y[q]*j+y[q+1]*_+y[q+2]*M)}var D=.6-E*E-A*A-S*S;if(D<0)o=0;else{var I=3*v[$+s+p[N+c+p[F+h]]];o=(D*=D)*D*(y[I]*E+y[I+1]*A+y[I+2]*S)}var R=.6-O*O-T*T-z*z;if(R<0)a=0;else{var V=3*v[$+f+p[N+l+p[F+d]]];a=(R*=R)*R*(y[V]*O+y[V+1]*T+y[V+2]*z)}var L=.6-P*P-B*B-C*C;if(L<0)u=0;else{var U=3*v[$+1+p[N+1+p[F+1]]];u=(L*=L)*L*(y[U]*P+y[U+1]*B+y[U+2]*C)}return 32*(e+o+a+u)},noise4D:function(t,r,n,e){var i,u,s,c,h,f,l,d,v,p,y,g,m,x,b,w,j,_=this.perm,M=this.grad4,E=(t+r+n+e)*o,A=Math.floor(t+E),S=Math.floor(r+E),O=Math.floor(n+E),T=Math.floor(e+E),z=(A+S+O+T)*a,P=t-(A-z),B=r-(S-z),C=n-(O-z),$=e-(T-z),N=0,F=0,k=0,q=0;P>B?N++:F++,P>C?N++:k++,P>$?N++:q++,B>C?F++:k++,B>$?F++:q++,C>$?k++:q++;var D=P-(f=N>=3?1:0)+a,I=B-(l=F>=3?1:0)+a,R=C-(d=k>=3?1:0)+a,V=$-(v=q>=3?1:0)+a,L=P-(p=N>=2?1:0)+2*a,U=B-(y=F>=2?1:0)+2*a,H=C-(g=k>=2?1:0)+2*a,G=$-(m=q>=2?1:0)+2*a,W=P-(x=N>=1?1:0)+3*a,Z=B-(b=F>=1?1:0)+3*a,X=C-(w=k>=1?1:0)+3*a,Y=$-(j=q>=1?1:0)+3*a,K=P-1+4*a,J=B-1+4*a,Q=C-1+4*a,tt=$-1+4*a,rt=255&A,nt=255&S,et=255&O,it=255&T,ot=.6-P*P-B*B-C*C-$*$;if(ot<0)i=0;else{var at=_[rt+_[nt+_[et+_[it]]]]%32*4;i=(ot*=ot)*ot*(M[at]*P+M[at+1]*B+M[at+2]*C+M[at+3]*$)}var ut=.6-D*D-I*I-R*R-V*V;if(ut<0)u=0;else{var st=_[rt+f+_[nt+l+_[et+d+_[it+v]]]]%32*4;u=(ut*=ut)*ut*(M[st]*D+M[st+1]*I+M[st+2]*R+M[st+3]*V)}var ct=.6-L*L-U*U-H*H-G*G;if(ct<0)s=0;else{var ht=_[rt+p+_[nt+y+_[et+g+_[it+m]]]]%32*4;s=(ct*=ct)*ct*(M[ht]*L+M[ht+1]*U+M[ht+2]*H+M[ht+3]*G)}var ft=.6-W*W-Z*Z-X*X-Y*Y;if(ft<0)c=0;else{var lt=_[rt+x+_[nt+b+_[et+w+_[it+j]]]]%32*4;c=(ft*=ft)*ft*(M[lt]*W+M[lt+1]*Z+M[lt+2]*X+M[lt+3]*Y)}var dt=.6-K*K-J*J-Q*Q-tt*tt;if(dt<0)h=0;else{var vt=_[rt+1+_[nt+1+_[et+1+_[it+1]]]]%32*4;h=(dt*=dt)*dt*(M[vt]*K+M[vt+1]*J+M[vt+2]*Q+M[vt+3]*tt)}return 27*(i+u+s+c+h)}},u._buildPermutationTable=s,r.SimplexNoise=u,t.exports=u}()}));Yi.SimplexNoise;function Ki(t){if(0===t.length)return 0;for(var r,n=t[0],e=0,i=1;i<t.length;i++)r=n+t[i],Math.abs(n)>=Math.abs(t[i])?e+=n-r+t[i]:e+=t[i]-r+n,n=r;return n+e}function Ji(t){if(0===t.length)throw new Error("mean requires at least one data point");return Ki(t)/t.length}function Qi(t){if(0===t.length)throw new Error("variance requires at least one data point");return function(t,r){var n,e,i=Ji(t),o=0;if(2===r)for(e=0;e<t.length;e++)o+=(n=t[e]-i)*n;else for(e=0;e<t.length;e++)o+=Math.pow(t[e]-i,r);return o}(t,2)/t.length}function to(t){if(1===t.length)return 0;var r=Qi(t);return Math.sqrt(r)}var ro=function(t,r){return(M(t)?Jt:Ne)(t,Be(r))};const no=1e6,eo=1e10;module.exports={TEN:10,HUN:100,K:1e3,K10:1e4,K100:1e5,M:no,M10:1e7,M100:1e8,B:1e9,B10:eo,B100:1e11,T:1e12};const io=new Yi(Xi("test")),oo=new Yi(Xi("everything")),ao=new Yi(Xi("life")),uo=new Yi(Xi("the universe"));class so extends ri{constructor(t){t.diameter||(t.diameter=5*eo),super(t),this.galaxies=sr(t,"galaxies",no)}makeChild(t,r){return new so({coord:t,parent:this,divisions:r})}get meanGalaxiesPerChild(){return this.sumOf(t=>t.galaxies)/this.size}get sdGalaxiesPerChild(){return to(this.map(t=>t.galaxies))}makeSubsectors(t,r){this.divide(t,r),this.forEach(t=>{const r=t.center.clone().multiplyScalar(12/this.diameter),e=t.center.clone().multiplyScalar(30/this.diameter),i=t.center.clone().multiplyScalar(200/this.diameter),o=t.center.clone().multiplyScalar(50/this.diameter),a=n(io.noise2D(r.x,r.y)).abs().times(-1).plus(1),u=n(oo.noise2D(e.x,e.y)).abs().times(-1).plus(1),s=ao.noise2D(i.x,i.y),c=n(uo.noise2D(o.x,o.y)).abs().times(-1).plus(1),h=n(a).times(30).plus(n(c).times(25)).plus(n(u).times(45)).plus(n(s).times(15)).times(no).floor().value;t.d=h});const e=ro(this.getChildren(),"d"),i=Ji(e),o=to(e);this.forEach(t=>{t.d=n(t.d).sub(i).div(o).plus(1).max(0).value});const a=ro(this.getChildren(),"d"),u=(Ji(a),to(a),Ki(a));let s=0,c=0;this.forEach(t=>{const{d:r}=t,e=c+r,i=n(this.galaxies).times(e).div(u).max(0).round().value;t.galaxies=i-s,s+=t.galaxies,c=e});const h=ro(this.getChildren(),"galaxies"),f=Ji(h),l=to(h);this.parent||console.log("-------- universe ",this.id,"has total galaxies:",Ki(h),"(target ",this.galaxies,"), mean",f,"sd:",l)}}return r.proppify(so).addProp("d",0,"number").addProp("galaxies",2e11,"integer"),{HexRegion:ri,randomFor:Xi,Universe:so}}));
